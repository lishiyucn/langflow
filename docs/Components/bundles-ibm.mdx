---
title: IBM
slug: /bundles-ibm
---

import Icon from "@site/src/components/icon";

[Bundle](/components-bundle-components) 包含支持与 Langflow 特定第三方集成的自定义组件。

**IBM** bundle 提供对 IBM watsonx.ai 模型的访问，用于文本和嵌入生成。
这些组件需要 IBM watsonx.ai 部署和 watsonx API 凭据。

## IBM watsonx.ai

**IBM watsonx.ai** 组件使用 [IBM watsonx.ai](https://www.ibm.com/products/watsonx-ai) 中的 [支持的基础模型](https://dataplatform.cloud.ibm.com/docs/content/wsj/analyze-data/fm-models.html?context=wx) 生成文本。

您可以在流中任何需要语言模型的地方使用此组件。

![使用 IBM watsonx.ai 组件作为中心语言模型组件的基本提示流。](/img/component-watsonx-model.png)

### IBM watsonx.ai 参数 {#ibm-watsonxai-parameters}

**IBM watsonx.ai** 组件的许多输入参数在可视化编辑器中默认隐藏。
您可以通过[组件标题菜单](/concepts-components#component-menus)中的 <Icon name="SlidersHorizontal" aria-hidden="true"/> **Controls** 切换参数。

| 名称 | 类型 | 描述 |
|------|------|-------------|
| url | String | 输入参数。您的部署和区域的 [watsonx API 基础 URL](https://cloud.ibm.com/apidocs/watsonx-ai#endpoint-url)。 |
| project_id | String | 输入参数。您的 [watsonx 项目 ID](https://www.ibm.com/docs/en/watsonx/saas?topic=projects)。 |
| api_key | SecretString | 输入参数。[watsonx API 密钥](https://www.ibm.com/docs/en/watsonx/saas?topic=administration-managing-user-api-key) 用于对指定的 watsonx.ai 部署和模型进行 watsonx API 访问身份验证。 |
| model_name | String | 输入参数。要使用的 watsonx 模型名称。选项从 API 动态获取。 |
| max_tokens | Integer | 输入参数。生成的最大令牌数。默认：`1000`。 |
| stop_sequence | String | 输入参数。应停止生成的序列。 |
| temperature | Float | 输入参数。控制输出的随机性。默认：`0.1`。 |
| top_p | Float | 输入参数。控制核采样，限制模型使用概率低于 `top_p` 值的令牌。范围：默认：`0.9`。 |
| frequency_penalty | Float | 输入参数。控制频率惩罚。正值降低重复令牌的概率，负值增加概率。范围：默认：`0.5`。 |
| presence_penalty | Float | 输入参数。控制存在惩罚。正值增加引入新话题的可能性。默认：`0.3`。 |
| seed | Integer | 输入参数。模型的随机种子。默认：`8`。 |
| logprobs | Boolean | 输入参数。是否返回输出令牌的对数概率。默认：`True`。 |
| top_logprobs | Integer | 输入参数。在每个位置返回的最可能令牌数。默认：`3`。 |
| logit_bias | String | 输入参数。要偏向或抑制的令牌 ID 的 JSON 字符串。 |

### IBM watsonx.ai 输出

**IBM watsonx.ai** 组件可以输出 **Model Response**（[`Message`](/data-types#message)）或 **Language Model**（[`LanguageModel`](/data-types#languagemodel)）。

当您想要使用 IBM watsonx.ai 模型作为其他 LLM 驱动组件（如 **Language Model** 或 **Smart Function** 组件）的 LLM 时，请使用 **Language Model** 输出。
有关更多信息，请参阅 [**Language Model** 组件](/components-models)。

**IBM watsonx.ai** 组件的 `LanguageModel` 输出是根据 [组件参数](#ibm-watsonxai-parameters) 配置的 [ChatWatsonx](https://python.langchain.com/docs/integrations/chat/ibm_watsonx/) 实例。

## IBM watsonx.ai Embeddings

**IBM watsonx.ai Embeddings** 组件使用 [IBM watsonx.ai](https://www.ibm.com/products/watsonx-ai) 中的 [支持的基础模型](https://dataplatform.cloud.ibm.com/docs/content/wsj/analyze-data/fm-models.html?context=wx) 进行嵌入生成。

输出是使用 [`WatsonxEmbeddings`](https://python.langchain.com/docs/integrations/text_embedding/ibm_watsonx/) 生成的 [`Embeddings`](/data-types#embeddings)。

有关在流中使用嵌入模型组件的更多信息，请参阅 [**Embedding Model** 组件](/components-embedding-models)。

![使用 IBM watsonx.ai Embeddings 组件的基本嵌入生成流](/img/component-watsonx-embeddings-chroma.png)

### IBM watsonx.ai Embeddings 参数

**IBM watsonx.ai Embeddings** 组件的一些输入参数在可视化编辑器中默认隐藏。
您可以通过[组件标题菜单](/concepts-components#component-menus)中的 <Icon name="SlidersHorizontal" aria-hidden="true"/> **Controls** 切换参数。

| 名称 | 显示名称 | 信息 |
|------|--------------|------|
| url | watsonx API Endpoint | 输入参数。您的部署和区域的 [watsonx API 基础 URL](https://cloud.ibm.com/apidocs/watsonx-ai#endpoint-url)。 |
| project_id | watsonx project id | 输入参数。您的 [watsonx 项目 ID](https://www.ibm.com/docs/en/watsonx/saas?topic=projects)。 |
| api_key | API Key | 输入参数。[watsonx API 密钥](https://www.ibm.com/docs/en/watsonx/saas?topic=administration-managing-user-api-key) 用于对指定的 watsonx.ai 部署和模型进行 watsonx API 访问身份验证。 |
| model_name | Model Name | 输入参数。要使用的嵌入模型名称。支持 [默认嵌入模型](#default-embedding-models) 并在连接到您的 watsonx.ai 部署后自动更新。 |
| truncate_input_tokens | Truncate Input Tokens | 输入参数。要处理的最大令牌数。默认：`200`。 |
| input_text | Include the original text in the output | 输入参数。确定是否在输出中包含原始文本。默认：`True`。 |

### 默认嵌入模型

默认情况下，**IBM watsonx.ai Embeddings** 组件支持以下默认模型：

- `sentence-transformers/all-minilm-l12-v2`：384 维嵌入
- `ibm/slate-125m-english-rtrvr-v2`：768 维嵌入
- `ibm/slate-30m-english-rtrvr-v2`：768 维嵌入
- `intfloat/multilingual-e5-large`：1024 维嵌入

输入 API 端点和凭据后，组件会自动从您的 watsonx.ai 部署中获取可用模型列表。

## 另请参阅

* [IBM 文档](https://cloud.ibm.com/docs)