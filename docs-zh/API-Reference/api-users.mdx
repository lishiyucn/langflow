---
title: 用户端点
slug: /api-users
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

使用 `/users` 端点来管理 Langflow 中的用户账户。

`user_id` 值专门用于 Langflow 的用户系统，它存储在 Langflow 数据库中并通过 `/users` API 端点进行管理。
Langflow 数据库中的 `user_id` 主键映射到 API 中的 `id` 值。

## 添加用户

使用用户名和密码创建新的用户账户。

这会为用户的 `id` 创建一个新的 UUID，它映射到 Langflow 数据库中的 `user_id`。

```bash
curl -X POST \
  "$LANGFLOW_URL/api/v1/users/" \
  -H "Content-Type: application/json" \
  -H "x-api-key: $LANGFLOW_API_KEY" \
  -d '{
    "username": "newuser2",
    "password": "securepassword123"
  }'
```

<details>
<summary>结果</summary>

```json
{
  "id": "10c1c6a2-ab8a-4748-8700-0e4832fd5ce8",
  "username": "newuser2",
  "profile_image": null,
  "store_api_key": null,
  "is_active": false,
  "is_superuser": false,
  "create_at": "2025-05-29T16:02:20.132436",
  "updated_at": "2025-05-29T16:02:20.132442",
  "last_login_at": null,
  "optins": {
    "github_starred": false,
    "dialog_dismissed": false,
    "discord_clicked": false
  }
}
```

</details>

## 获取当前用户

检索当前已认证用户的信息。

```bash
curl -X GET \
  "$LANGFLOW_URL/api/v1/users/whoami" \
  -H "accept: application/json" \
  -H "x-api-key: $LANGFLOW_API_KEY"
```

<details>
<summary>结果</summary>

```json
{
  "id": "07e5b864-e367-4f52-b647-a48035ae7e5e",
  "username": "langflow",
  "profile_image": null,
  "store_api_key": null,
  "is_active": true,
  "is_superuser": true,
  "create_at": "2025-05-08T17:59:07.855965",
  "updated_at": "2025-05-29T15:06:56.157860",
  "last_login_at": "2025-05-29T15:06:56.157016",
}
```

</details>

## 列出所有用户

获取系统中所有用户的分页列表。
只有超级用户可以使用此端点（`is_superuser: true`）。

```bash
curl -X GET \
  "$LANGFLOW_URL/api/v1/users/?skip=0&limit=10" \
  -H "accept: application/json" \
  -H "x-api-key: $LANGFLOW_API_KEY"
```

<details>
<summary>结果</summary>

```json
{
  "total_count": 3,
  "users": [
    {
      "id": "07e5b864-e367-4f52-b647-a48035ae7e5e",
      "username": "langflow",
      "profile_image": null,
      "store_api_key": null,
      "is_active": true,
      "is_superuser": true,
      "create_at": "2025-05-08T17:59:07.855965",
      "updated_at": "2025-05-29T15:06:56.157860",
      "last_login_at": "2025-05-29T15:06:56.157016",
      "optins": {
        "github_starred": false,
        "dialog_dismissed": true,
        "discord_clicked": false,
        "mcp_dialog_dismissed": true
      }
    },
    {
      "id": "c48a1f68-cc7e-491a-a507-a1a627708470",
      "username": "newuser",
      "profile_image": null,
      "store_api_key": null,
      "is_active": false,
      "is_superuser": false,
      "create_at": "2025-05-29T16:00:33.483386",
      "updated_at": "2025-05-29T16:00:33.483392",
      "last_login_at": null,
      "optins": {
        "github_starred": false,
        "dialog_dismissed": false,
        "discord_clicked": false
      }
    },
    {
      "id": "10c1c6a2-ab8a-4748-8700-0e4832fd5ce8",
      "username": "newuser2",
      "profile_image": null,
      "store_api_key": null,
      "is_active": false,
      "is_superuser": false,
      "create_at": "2025-05-29T16:02:20.132436",
      "updated_at": "2025-05-29T16:02:20.132442",
      "last_login_at": null,
      "optins": {
        "github_starred": false,
        "dialog_dismissed": false,
        "discord_clicked": false
      }
    }
  ]
}
```

</details>

## 更新用户

使用 PATCH 请求修改现有用户的信息。

此示例将用户 `10c1c6a2-ab8a-4748-8700-0e4832fd5ce8` 设置为活跃的超级用户。

```bash
curl -X PATCH \
  "$LANGFLOW_URL/api/v1/users/10c1c6a2-ab8a-4748-8700-0e4832fd5ce8" \
  -H "Content-Type: application/json" \
  -H "x-api-key: $LANGFLOW_API_KEY" \
  -d '{
    "is_active": true,
    "is_superuser": true
  }'
```

<details>
<summary>结果</summary>

```json
{
  "id": "10c1c6a2-ab8a-4748-8700-0e4832fd5ce8",
  "username": "newuser2",
  "profile_image": null,
  "store_api_key": null,
  "is_active": true,
  "is_superuser": true,
  "create_at": "2025-05-29T16:02:20.132436",
  "updated_at": "2025-05-29T16:19:03.514527Z",
  "last_login_at": null,
  "optins": {
    "github_starred": false,
    "dialog_dismissed": false,
    "discord_clicked": false
  }
}
```

</details>

## 重置密码

将用户的密码更改为新的安全值。

您不能更改其他用户的密码。

```bash
curl -X PATCH \
  "$LANGFLOW_URL/api/v1/users/10c1c6a2-ab8a-4748-8700-0e4832fd5ce8/reset-password" \
  -H "Content-Type: application/json" \
  -H "x-api-key: $LANGFLOW_API_KEY" \
  -d '{
    "password": "newsecurepassword123"
  }'
```

<details>
<summary>结果</summary>

```json
{
  "id": "10c1c6a2-ab8a-4748-8700-0e4832fd5ce8",
  "username": "langflow",
  "profile_image": null,
  "store_api_key": null,
  "is_active": true,
  "is_superuser": true,
  "create_at": "2025-05-08T17:59:07.855965",
  "updated_at": "2025-05-29T15:06:56.157860",
  "last_login_at": "2025-05-29T15:06:56.157016",
  "optins": {
    "github_starred": false,
    "dialog_dismissed": true,
    "discord_clicked": false
  }
}
```

</details>

## 删除用户

从系统中删除用户账户。

只有超级用户可以使用此端点（`is_superuser: true`）。

```bash
curl -X DELETE \
  "$LANGFLOW_URL/api/v1/users/10c1c6a2-ab8a-4748-8700-0e4832fd5ce8" \
  -H "accept: application/json" \
  -H "x-api-key: $LANGFLOW_API_KEY"
```

<details>
<summary>结果</summary>

```json
{
  "detail": "User deleted"
}
```

</details>